{% extends "base.html" %}

{% block title %}{% if new_user %}New User{% else %}Edit User{% endif %}{% endblock %}

{% block content %}
<form action="/admin/user/edit" method="post" accept-charset="utf-8">

  <div class="uk-margin">
    <label class="uk-form-label" for="form-stacked-text">Username</label>
    <input class="uk-input" type="text" name="username" {% if !edit_username.is_empty() %}value="{{ edit_username }}"{% endif %}>
  </div>
  {% if new_user %}
    <div class="uk-margin">
      <label class="uk-form-label" for="form-stacked-text">Password</label>
      <input class="uk-input" type="password" name="password">
    </div>
  {% endif %}
  <div class="uk-margin">
    <label class="uk-form-label" for="form-stacked-text">Admin Access</label>
    <input class="uk-checkbox" type="checkbox" name="admin" {% if is_admin %}checked{% endif %}>
  </div>

  {% if !new_user %}
    <div>
      <button class="uk-button uk-button-default" type="button" uk-toggle="target: #change-password">Change Password</button>
      <div id="change-password" class="uk-margin" hidden>
        <label class="uk-form-label" for="form-stacked-text">New Password</label>
        <input class="uk-input" type="password" name="password">
      </div>
    </div>
  {% endif %}

  <hr class="uk-divider-icon">

  <input type="submit" value="Save" class="uk-button uk-button-primary">
</form>
{% endblock %}

{% block scripts %}
<script>
  var username;
  var error;
  {% if !new_user %}
    username = '/{{ edit_username }}';
  {% endif %}
  {% if !error.is_empty() %}
    error = '{{ error }}';
  {% endif %}
</script>
<script src="/static/js/alert.js"></script>
<script src="/static/js/user-edit.js"></script>
{% endblock %}
