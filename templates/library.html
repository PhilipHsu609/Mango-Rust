{% extends "base.html" %}

{% block title %}Library{% endblock %}

{% block styles %}
{% include "library_styles.css" %}
{% endblock %}

{% block content %}
<h2>Library</h2>
<p class="subtitle">{{ title_count }} titles found</p>

<!-- Search and Sort Controls -->
<div class="controls">
    <div class="uk-search uk-search-default">
        <span class="uk-search-icon-flip" uk-search-icon></span>
        <input class="uk-search-input" type="search" placeholder="Search">
    </div>
    <select class="uk-select" id="sort-select">
        <option value="title:1"{% if sort_name_asc %} selected{% endif %}>â–² Name</option>
        <option value="title:0"{% if sort_name_desc %} selected{% endif %}>â–¼ Name</option>
        <option value="modified:1"{% if sort_time_asc %} selected{% endif %}>â–² Date Modified</option>
        <option value="modified:0"{% if sort_time_desc %} selected{% endif %}>â–¼ Date Modified</option>
    </select>
</div>

<!-- Titles Grid -->
<div class="titles-grid">
    {% for title in titles %}
    <a href="/book/{{ title.id }}" class="title-card">
        <div class="title-thumbnail">
            <div class="placeholder-icon">ðŸ“–</div>
            <div class="progress-badge">0.0%</div>
        </div>
        <div class="title-info">
            <div class="title-name">{{ title.name }}</div>
            <div class="title-stats">{{ title.entry_count }} {% if title.entry_count == 1 %}entry{% else %}entries{% endif %}</div>
        </div>
    </a>
    {% endfor %}

    {% if titles.is_empty() %}
    <p>No manga found. Add manga files to your library directory.</p>
    {% endif %}
</div>
{% endblock %}

{% block scripts %}
<script>
{% include "library_scripts.js" %}
</script>
{% endblock %}
